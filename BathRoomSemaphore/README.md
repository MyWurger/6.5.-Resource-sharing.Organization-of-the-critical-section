# Семафоры и многопоточность: ванная комната

## Описание

Данный пример кода демонстрирует использование семафоров и многопоточности для моделирования ситуации с ванной комнатой, в которую по очереди входят мужчины и женщины. Код написан на языке C и использует библиотеки 'pthread' и 'semaphore' для работы с потоками и семафорами соответственно.

Правила доступа в ванную комнату следующие:

- В ванной комнате может находиться ограниченное количество людей (в данной реализации это число равно 3).
- Если в ванной комнате есть люди противоположного пола, новые люди не могут войти.
- Если ванная комната свободна, то в нее могут войти люди любого пола.
- Если ванная комната занята людьми одного пола, то люди того же пола могут войти, пока не будет достигнут лимит вместимости.

Программа использует синхронизацию потоков для обеспечения соблюдения этих правил доступа.

## Цель проекта
Реализация классической задачи производителя и потребителя с помощью семафоров в многопоточной среде.

## Как запустить
Для компиляции проекта используйте: `gcc bathroom.c -o bathroom -lpthread`
Запустите исполняемый файл: `./bathroom`


## Глобальные переменные

- `sem_t empty`: Семафор для учета свободных мест в буфере-ванной комнате.
- `sem_t full`: Семафор для учета занятых мест в буфере-ванной комнате.
- `sem_t threadSemaphore`: Семафор для синхронизации запуска потоков.
- `sem_t mutex`: Семафор для обеспечения взаимоисключающего доступа к критической секции.
- `int buffer[BUFFER_SIZE]`: Буфер для имитации ванной комнаты.

## Функции

### Мужчины и ванная комната

- `void* male(void* arg)`: Функция потока для мужчин.

  - Аргументы: `arg` - указатель на данные, передаваемые в поток.
  - Ожидает разрешения на запуск потока.
  - Разрешает запуск других потоков.
  - Обрабатывает данные, переданные в аргументе функции.
  - Основной цикл: ожидает свободного места в буфере, входит в критическую секцию, проверяет условия входа, обновляет счетчики, имитирует время пребывания в ванной, выходит из ванной, обновляет индексы и счетчики, разрешая доступ к критической секции и сигнализируя о свободном месте.
  - Завершает работу потока.

### Женщины и ванная комната

- `void* female(void* arg)`: Функция потока для женщин.

  - Аналогична функции `male()`, но для женщин.

### Приветственная надпись

- `void print_start()`: Печатает приветственное сообщение в виде ASCII-арта.

### Прощальная надпись

- `void print_end()`: Печатает прощальное сообщение в виде ASCII-арта.

### Очистка буфера ввода

- `void clearInputBuffer()`: Очищает буфер ввода, ожидая нажатия клавиши пользователем.

## Основная программа

- `int main()`: Запрашивает количество мужчин и женщин, создает потоки, запускает и ожидает их завершения.

  - Очищает консоль и печатает приветствие.
  - Запрашивает у пользователя количество мужчин и женщин.
  - Создает массивы потоков для мужчин и женщин.
  - Инициализирует данные и семафоры.
  - Создает потоки для мужчин и женщин.
  - Разрешает запуск потоков.
  - Ожидает завершения потоков.
  - Уничтожает семафоры.
  - Печатает сообщение об успешном завершении и прощание.
  - Ожидает нажатия клавиши перед завершением программы.

